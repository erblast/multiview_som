"0","# create a grid onto which the som will be mapped"
"0","# we might want to change map dimension in future versions"
"0","som_grid = kohonen::somgrid(xdim = map_dimension"
"0","                            , ydim=map_dimension"
"0","                            , topo=""hexagonal"")"
"0","if(recalculate_map == F & file.exists('som.Rdata') == T){"
"0","  "
"0","  load('som.Rdata')"
"0","  "
"0","} else{"
"0","  m = kohonen::supersom( data_list"
"0","                   , grid=som_grid"
"0","                   , rlen= n_iterations"
"0","                   , alpha = 0.05"
"0","                   , whatmap = c(factors, 'numerics')"
"0","                   , dist.fcts = distances"
"0","                   #, maxNA.fraction = .5"
"0","                    )"
"0","  save(m, file = 'som.Rdata')"
"0","  "
"0","}"
"0","plot(m, type=""changes"")"
